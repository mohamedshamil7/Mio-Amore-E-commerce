<section class="page-align" id="footer">
  <div class="container-fluid " id="mydata">
    <div class="row">

      <!-- General Form Elements -->

      <form action="/admin/editProduct-submit" method="post" enctype='multipart/form-data'>
        <input type="text" name="id" value="{{product._id}}" hidden>
        <div class="row mb-3">
          <label for="inputText" class="col-sm-2 col-form-label">Product Name</label>
          <div class="col-sm-4">
            <input type="text" name="ProductName" class="form-control" value="{{product.ProductName}}">
          </div>
        </div>
        <div class="row mb-3">
          <label for="inputEmail" class="col-sm-2 col-form-label">Company</label>
          <div class="col-sm-4">
            <input type="text" name="Company" class="form-control" value="{{product.Company}}">
          </div>
        </div>
             <div class="row mb-3">
          <label for="inputNumber" class="col-sm-2 col-form-label">MRP</label>
          <div class="col-sm-4">
            <input type="number" name="MRP" class="form-control" value="{{product.MRP}}">
          </div>
        </div>

        <div class="row mb-3">
          <label for="inputNumber" class="col-sm-2 col-form-label">Price</label>
          <div class="col-sm-4">
            <input type="number" name="Price" class="form-control" value="{{product.Price}}">
          </div>
        </div>
        <div class="row mb-3">
          <label class="col-sm-2 col-form-label">File Upload</label>
          <img style="width: 50px;" src="{{product.urlImage1}}" alt="no">
          {{#if product.isImage1}}
            <button type="button"  style="float: right; width: 60px;" class="btn btn-danger" id="delBtn1" onclick="return deleteImage('{{product.Image1}}','{{product._id}}','Image1')" ><i class="bi bi-trash"></i></button>
          <input type="text"  class="col-sm-4" name="imagename1" id="imagename1" value="{{product.Image1}}" readonly >
           <div class="col-sm-4 mb-3">
            <input class="form-control" type="file" name="Image1" id="imgFile1" style="display: none;">
          </div>
          {{else}}
         <div class="col-sm-4 mb-3">
            <input class="form-control" type="file" name="Image1" id="formFile" >
          </div>
          {{/if}}
        </div>

          <div class="row mb-3">

          <label class="col-sm-2 col-form-label">File Upload</label>
          <img style="width: 50px;" src="{{product.urlImage2}}" alt="no">
              {{#if product.isImage2}}
            <button type="button" style="float: right; width: 60px;" class="btn btn-danger  " id="delBtn2" onclick="return deleteImage('{{product.Image2}}','{{product._id}}','Image2')" ><i class="bi bi-trash"></i></button>
          <input type="text" class="col-sm-4" name="imagename2" id="imagename2" value="{{product.Image2}}" readonly>
          <div class="col-sm-4 mb-3">
            <input class="form-control" type="file" name="Image2" id="imgFile2" style="display: none;">
          </div>
          {{else}}
          <div class="col-sm-4 mb-3">
            <input class="form-control" type="file" name="Image2" id="formFile" >
          </div>
          {{/if}}
        </div>

        <div class="row mb-3">
          <label class="col-sm-2 col-form-label">File Upload</label>
          <img style="width: 50px;" src="{{product.urlImage3}}" alt="no">
            {{#if product.isImage3}}
            <button type="button" style="float: right; width: 60px;" class="btn btn-danger "  onclick="deleteImage('{{product.Image3}}','{{product._id}}','Image3')" ><i class="bi bi-trash"></i></button>
          <input type="text"  class="col-sm-4" name="imagename3" id="imagename3" value="{{product.Image3}}" readonly>
          <div class="col-sm-4 mb-3">
            <input class="form-control" type="file" name="Image3" value="{{product.Image3}}" id="delBtn3" style="display: none;">
          </div>
          {{else}}
          <div class="col-sm-4 mb-3">
            <input class="form-control" type="file" name="Image3" value="{{product.Image3}}" id="formFile" >
          </div>
          {{/if}}
        </div>

        <div class="row mb-3">
          <label class="col-sm-2 col-form-label">File Upload</label>
          <img style="width: 50px;" src="{{product.urlImage4}}" alt="no">
            {{#if product.isImage4}}
            <button type="button" style="float: right; width: 60px;"  class="btn btn-danger " id="delBtn4" onclick="return deleteImage('{{product.Image4}}','{{product._id}}','Image4')" ><i class="bi bi-trash"></i></button>
            <input type="text" class="col-sm-4" name="imagename4" id="imagename4" value="{{product.Image4}}" readonly>
            
          <div class="col-sm-4 mb-3">
            <input class="form-control" type="file" name="Image4" id="imgFile4" value="{{product.Image4}}" style="display: none;">
          </div>

          {{else}}
           <div class="col-sm-4 mb-3">
            <input class="form-control" type="file" name="Image4" id="formFile" value="{{product.Image4}}" >
          </div>
            {{/if}}
        </div>


        <div class="row mb-3">
          <label for="inputDate" class="col-sm-2 col-form-label">Manufacturing Date</label>
          <div class="col-sm-4">
            <input type="date" name="ManufacturingDate" class="form-control" value="{{product.ManufacturingDate}}">
          </div>
        </div>

        <div class="row mb-5">
          <label class="col-sm-2 col-form-label">Payment Options</label>
          <div class="col-sm-10">


            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="flexSwitchCheckCheckedDisabled" checked disabled>
              <label class="form-check-label" for="flexSwitchCheckCheckedDisabled">Online payment (mandidatory)</label>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" name="COD" value={{product.COD}}
                id="flexSwitchCheckDefault">
              <label class="form-check-label" for="flexSwitchCheckDefault">COD(optional)</label>
            </div>
          </div>
        </div>


        <div class="row mb-3">
          <label class="col-sm-2 col-form-label">Category</label>
          <div class="col-sm-4">
            <select class="form-select" name="category" aria-label="Default select example">
              {{#if categories}}
              <option value="{{product.category}}">{{product.category}}</option>
              {{else}}
              <option selected>select Category</option>
              {{/if}}
              {{#each categories}}
              <option value="{{this.categoryName}}">{{this.categoryName}}</option>
              {{/each}}
            </select>
          </div>
        </div>

        <div class="row mb-3">
                  <label for="inputNumber"  class="col-sm-2 col-form-label">Stock</label>
                  <div class="col-sm-4">
                    <input type="number" name="Stock" value="{{product.Stock}}" class="form-control">
                  </div>

                  <div class="row mb-3">
                  <label for="inputNumber"  class="col-sm-2 col-form-label">Size</label>
                  <div class="col-sm-4">
                    <input type="text" name="Size" value="{{product.Size}}" class="form-control">
                  </div>

                  <div class="row mb-3">
                  <label for="inputNumber"  class="col-sm-2 col-form-label">Color</label>
                  <div class="col-sm-4">
                    <input type="text" name="Color" value="{{product.Color}}" class="form-control">
                  </div>

        <div class="row mb-3">
          <label for="inputPassword" class="col-sm-2 col-form-label">Description</label>
          <div class="col-sm-6">
            <textarea class="form-control" id="myTextarea1" name="Description" style="height: 100px"></textarea>
          </div>
        </div>
        <div class="row mb-3">
          {{!-- <label class="col-sm-2 col-form-label">Submit Button</label> --}}
          <div class="col-sm-4 col-form-label">
            <button type="submit" class="btn btn-primary">Add Product</button>
          </div>
        </div>

      </form><!-- End General Form Elements -->
    </div>
  </div>
  <input type="text" value="{{product.Description}}" id="Description" hidden>

</section>

<script>
  document.getElementById("myTextarea1").defaultValue = document.getElementById('Description').value;

  function deleteImage(image,id,no){
  {{!-- let image = image
  let id=id
  let no =no --}}
  Swal.fire({
      title: 'Are you sure you want to Delete  this Image ?',
      text: "You won't be able to revert this!",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      confirmButtonText: 'Yes, Delete it!'
  }).then((result)=>{
      if(result.isConfirmed){
       
          $.ajax({
              url:"/admin/deleteImage",
              method:'delete',
              data:{
                  image,id,no
              },
              success:(response)=>{
                 if(no==='Image1'){
          document.getElementById("delBtn1").style.display="none"
          document.getElementById("imgFile1").style.display="inline"
          document.getElementById('imagename1').value=''
          document.getElementById('imagename1').style.display="none"
        }else if(no==='Image2'){
          document.getElementById("delBtn2").style.display="none"
          document.getElementById("imgFile2").style.display="inline"
          document.getElementById('imagename2').value=''
          document.getElementById('imagename2').style.display="none"
          
        }else if(no==='Image3'){
          
          document.getElementById("delBtn3").style.display="none"
          document.getElementById("imgFile3").style.display="inline"
          document.getElementById('imagename3').value=''
          document.getElementById('imagename3').style.display="none"
          
        }else if(no==='Image4'){
          document.getElementById("delBtn4").style.display="none"
          document.getElementById("imgFile4").style.display="inline"
          document.getElementById('imagename4').value=''
          document.getElementById('imagename4').style.display="none"

        }

                if(response.status){
                  Swal.fire({
                    icon: 'success',
                    title: 'Image Deleted',
                    showConfirmButton: false,

                  })

                }
                 
                      //  location.reload()

                  }, error:(xhr, thrownError)=>{
                    // alert(xhr.responseText)
                    Swal.fire({
                      icon: 'warning',
                      title: xhr.responseText,
                      showConfirmButton: false,

                    })
                    


        }
          })
      }
    })
}// })

</script>